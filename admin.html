<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Simplicity Blog</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .admin-container {
            max-width: 1000px;
            margin: 40px auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .login-form {
            max-width: 400px;
            margin: 100px auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .login-form h2 {
            color: #2c3e50;
            margin-bottom: 30px;
        }

        .login-form input {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 2px solid #ecf0f1;
            border-radius: 6px;
            font-size: 1em;
            box-sizing: border-box;
        }

        .login-form input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .login-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 20px;
        }

        .admin-header h1 {
            color: #2c3e50;
            font-size: 2em;
        }

        .logout-btn {
            padding: 10px 20px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #ecf0f1;
        }

        .tab-btn {
            padding: 12px 25px;
            background: white;
            border: none;
            border-bottom: 3px solid transparent;
            color: #667eea;
            cursor: pointer;
            font-weight: 600;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            border-bottom-color: #667eea;
            color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .pending-blog {
            background: #fff9f0;
            border: 2px solid #f39c12;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .approved-blog {
            background: #f0fff4;
            border: 2px solid #27ae60;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .blog-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .blog-info h3 {
            color: #2c3e50;
            margin: 0 0 8px 0;
            font-size: 1.2em;
        }

        .blog-meta {
            display: flex;
            gap: 15px;
            font-size: 0.9em;
            color: #95a5a6;
            margin-bottom: 10px;
        }

        .blog-content-preview {
            background: white;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            max-height: 200px;
            overflow-y: auto;
            border-left: 4px solid #667eea;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .blog-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .approve-btn {
            padding: 10px 20px;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .approve-btn:hover {
            background: #229954;
            transform: translateY(-2px);
        }

        .reject-btn {
            padding: 10px 20px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .reject-btn:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        .view-btn {
            padding: 10px 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .view-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .empty-message {
            text-align: center;
            padding: 40px;
            color: #95a5a6;
            font-size: 1.1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .admin-container {
                padding: 20px;
            }

            .admin-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .admin-header h1 {
                font-size: 1.5em;
            }

            .blog-header {
                flex-direction: column;
            }

            .blog-actions {
                flex-direction: column;
            }

            .blog-actions button {
                width: 100%;
            }

            .tabs {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-form">
        <h2>üîê Admin Login</h2>
        <input type="password" id="passwordInput" placeholder="Enter admin password" autocomplete="off">
        <button class="login-btn" onclick="checkPassword()">Login</button>
        <p style="color: #95a5a6; margin-top: 20px; font-size: 0.9em;">
            <a href="index.html" style="color: #667eea; text-decoration: none;">‚Üê Back to Home</a>
        </p>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" style="display: none;">
        <div class="admin-container">
            <div class="admin-header">
                <h1>üìä Admin Dashboard</h1>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>

            <!-- Stats -->
            <div class="stats" id="statsContainer"></div>

            <!-- Tabs -->
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('pending')">‚è≥ Pending Approval</button>
                <button class="tab-btn" onclick="switchTab('approved')">‚úÖ Published</button>
                <button class="tab-btn" onclick="switchTab('feedback')">üí¨ Feedback</button>
            </div>

            <!-- Pending Tab -->
            <div id="pending" class="tab-content active">
                <div id="pendingList"></div>
            </div>

            <!-- Approved Tab -->
            <div id="approved" class="tab-content">
                <div id="approvedList"></div>
            </div>

            <!-- Feedback Tab -->
            <div id="feedback" class="tab-content">
                <div id="feedbackList"></div>
            </div>
        </div>
    </div>

    <script>
        const ADMIN_PASSWORD = 'Iamacat@123458'; // Change this to your desired password

        function checkPassword() {
            const password = document.getElementById('passwordInput').value;
            if (password === ADMIN_PASSWORD) {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                loadDashboard();
            } else {
                alert('‚ùå Incorrect password!');
                document.getElementById('passwordInput').value = '';
            }
        }

        function logout() {
            document.getElementById('loginScreen').style.display = 'block';
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('passwordInput').value = '';
        }

        function loadDashboard() {
            const userBlogs = JSON.parse(localStorage.getItem('userBlogs')) || [];
            const pendingBlogs = userBlogs.filter(blog => blog.status === 'pending');
            const approvedBlogs = JSON.parse(localStorage.getItem('approvedBlogs')) || [];
            const siteFeedback = JSON.parse(localStorage.getItem('siteFeedback')) || [];

            // Update stats
            updateStats(pendingBlogs.length, approvedBlogs.length, siteFeedback.length);

            // Render pending blogs
            renderPendingBlogs(pendingBlogs);

            // Render approved blogs
            renderApprovedBlogs(approvedBlogs);

            // Render feedback
            renderFeedback(siteFeedback);
        }

        function updateStats(pending, approved, feedbackCount) {
            const statsContainer = document.getElementById('statsContainer');
            statsContainer.innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${pending}</div>
                    <div class="stat-label">Pending Review</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${approved}</div>
                    <div class="stat-label">Published</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${feedbackCount}</div>
                    <div class="stat-label">Feedback</div>
                </div>
            `;
        }

        function renderPendingBlogs(blogs) {
            const container = document.getElementById('pendingList');
            if (blogs.length === 0) {
                container.innerHTML = '<div class="empty-message">No pending blogs. All caught up! ‚ú®</div>';
                return;
            }

            container.innerHTML = blogs.map(blog => `
                <div class="pending-blog">
                    <div class="blog-header">
                        <div class="blog-info">
                            <h3>${blog.title}</h3>
                            <div class="blog-meta">
                                <span>üë§ ${blog.author}</span>
                                <span>üìß ${blog.email}</span>
                                <span>üè∑Ô∏è ${blog.category}</span>
                                <span>üìÖ ${blog.date}</span>
                            </div>
                        </div>
                        <span style="background: #f39c12; color: white; padding: 6px 12px; border-radius: 20px; font-size: 0.75em; font-weight: 700;">PENDING</span>
                    </div>
                    <p style="color: #666; margin: 10px 0;"><strong>Excerpt:</strong> ${blog.excerpt}</p>
                    <div class="blog-content-preview">
                        <strong>Preview:</strong><br>${blog.content.substring(0, 300)}...
                    </div>
                    <div class="blog-actions">
                        <button class="approve-btn" onclick="approveBlog('${blog.id}')">‚úÖ Approve & Publish</button>
                        <button class="reject-btn" onclick="rejectBlog('${blog.id}')">‚ùå Reject</button>
                        <button class="view-btn" onclick="viewFullBlog('${blog.id}')">üëÅÔ∏è View Full</button>
                    </div>
                </div>
            `).join('');
        }

        function renderApprovedBlogs(blogs) {
            const container = document.getElementById('approvedList');
            if (blogs.length === 0) {
                container.innerHTML = '<div class="empty-message">No published blogs yet.</div>';
                return;
            }

            container.innerHTML = blogs.map(blog => `
                <div class="approved-blog">
                    <div class="blog-header">
                        <div class="blog-info">
                            <h3>${blog.title}</h3>
                            <div class="blog-meta">
                                <span>üë§ ${blog.author}</span>
                                <span>üè∑Ô∏è ${blog.category}</span>
                                <span>üìÖ ${blog.date}</span>
                            </div>
                        </div>
                        <span style="background: #27ae60; color: white; padding: 6px 12px; border-radius: 20px; font-size: 0.75em; font-weight: 700;">PUBLISHED</span>
                    </div>
                    <p style="color: #666; margin: 10px 0;"><strong>Excerpt:</strong> ${blog.excerpt}</p>
                    <div class="blog-actions">
                        <button class="view-btn" onclick="viewFullBlog('${blog.id}')">üëÅÔ∏è View Full</button>
                        <button class="reject-btn" onclick="unpublishBlog('${blog.id}')">üóëÔ∏è Unpublish</button>
                    </div>
                </div>
            `).join('');
        }

        function renderFeedback(feedbackList) {
            const container = document.getElementById('feedbackList');
            if (feedbackList.length === 0) {
                container.innerHTML = '<div class="empty-message">No feedback received yet.</div>';
                return;
            }

            // Sort by newest first
            feedbackList.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

            container.innerHTML = feedbackList.map(item => `
                <div class="pending-blog" style="border-color: #667eea; background: #f0f4ff;">
                    <div class="blog-header">
                        <div class="blog-info">
                            <h3>${item.subject}</h3>
                            <div class="blog-meta">
                                <span>üë§ ${item.userName}</span>
                                <span>üìß ${item.userEmail}</span>
                                <span>üè∑Ô∏è ${item.type}</span>
                                <span>üìÖ ${item.timestamp}</span>
                            </div>
                        </div>
                        <span style="background: #667eea; color: white; padding: 6px 12px; border-radius: 20px; font-size: 0.75em; font-weight: 700;">FEEDBACK</span>
                    </div>
                    <div class="blog-content-preview" style="border-left-color: #667eea;">
                        ${item.message}
                    </div>
                    <div class="blog-actions">
                        <button class="reject-btn" onclick="deleteFeedback('${item.id}')">üóëÔ∏è Delete</button>
                        <a href="mailto:${item.userEmail}?subject=Re: ${item.subject}" class="view-btn" style="text-decoration: none; text-align: center;">‚Ü©Ô∏è Reply</a>
                    </div>
                </div>
            `).join('');
        }

        function deleteFeedback(id) {
            if (!confirm('Are you sure you want to delete this feedback?')) return;

            let siteFeedback = JSON.parse(localStorage.getItem('siteFeedback')) || [];
            siteFeedback = siteFeedback.filter(item => item.id !== id);
            localStorage.setItem('siteFeedback', JSON.stringify(siteFeedback));

            alert('üóëÔ∏è Feedback deleted.');
            loadDashboard();
        }

        function approveBlog(blogId) {
            if (!confirm('Are you sure you want to publish this blog?')) return;

            const userBlogs = JSON.parse(localStorage.getItem('userBlogs')) || [];
            const blog = userBlogs.find(b => b.id === blogId);

            if (blog) {
                // Remove from pending
                const updatedUserBlogs = userBlogs.filter(b => b.id !== blogId);
                localStorage.setItem('userBlogs', JSON.stringify(updatedUserBlogs));

                // Add to approved with published status
                const approvedBlog = { ...blog, status: 'published' };
                let approvedBlogs = JSON.parse(localStorage.getItem('approvedBlogs')) || [];
                approvedBlogs.push(approvedBlog);
                localStorage.setItem('approvedBlogs', JSON.stringify(approvedBlogs));

                alert('‚úÖ Blog published successfully!');
                loadDashboard();
            }
        }

        function rejectBlog(blogId) {
            if (!confirm('Are you sure you want to reject this blog? It will be deleted permanently.')) return;

            const userBlogs = JSON.parse(localStorage.getItem('userBlogs')) || [];
            const updatedUserBlogs = userBlogs.filter(b => b.id !== blogId);
            localStorage.setItem('userBlogs', JSON.stringify(updatedUserBlogs));

            alert('‚ùå Blog rejected and deleted.');
            loadDashboard();
        }

        function unpublishBlog(blogId) {
            if (!confirm('Are you sure you want to unpublish this blog?')) return;

            let approvedBlogs = JSON.parse(localStorage.getItem('approvedBlogs')) || [];
            approvedBlogs = approvedBlogs.filter(b => b.id !== blogId);
            localStorage.setItem('approvedBlogs', JSON.stringify(approvedBlogs));

            alert('üîÑ Blog unpublished.');
            loadDashboard();
        }

        function viewFullBlog(blogId) {
            const userBlogs = JSON.parse(localStorage.getItem('userBlogs')) || [];
            const approvedBlogs = JSON.parse(localStorage.getItem('approvedBlogs')) || [];
            const allBlogs = [...userBlogs, ...approvedBlogs];
            const blog = allBlogs.find(b => b.id === blogId);

            if (blog) {
                const fullContent = `
BLOG DETAILS
============
Title: ${blog.title}
Author: ${blog.author}
Email: ${blog.email}
Category: ${blog.category}
Date: ${blog.date}
Status: ${blog.status}

Excerpt:
${blog.excerpt}

Full Content:
${blog.content}
                `;
                alert(fullContent);
            }
        }

        function switchTab(tab) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));

            // Show selected tab
            document.getElementById(tab).classList.add('active');
            event.target.classList.add('active');
        }

        // Allow Enter key to login
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('passwordInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') checkPassword();
            });
        });
    </script>
</body>
</html>
